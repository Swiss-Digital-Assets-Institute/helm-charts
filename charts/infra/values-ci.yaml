# This file is used to set global values for the CI environment in the Helm chart.
# It includes AWS configurations, S3 settings, KMS, ECR, RDS,
# --global configuration for CI environment
global:
  # --global.env: Environment name, e.g., "ci"
  env: "test"
  org: "ci"
  team: "devops"
  project: "shared"
  managed_by: "crossplane"

aws:
  enabled: true
  account: "00000000000"
  region: "eu-central-2"
  eksOidcId: "0000000000000000000000"

  s3:
    enabled: true
    lifeCycleConfiguration:
      enabled: false
    versioning:
      enabled: false

  kms:
    enabled: false

  ecr:
    enabled: false

  # rds:
  #   enabled: false
  rds:
    enabled: true
    dbName: credentialServices
    passwordSecretRef:
      name: kvv-ci-infra
      key: DB_PASSWORD
      namespace: ci

  cdn:
    enabled: false

# ExternalSecrets configuration
externalSecrets:
  # -- If enabled, ExternalSecret resources will be created to sync secrets from external sources (e.g., Vault).
  enabled: true
  # -- The time interval at which secrets are refreshed from the external source (e.g., Vault).
  # Default value is "30s", meaning secrets will be refreshed every 30 seconds.
  refreshInterval: "30s"
  secretStoreRef:
    # -- The kind of SecretStore used to fetch secrets.
    # By default, this is set to "ClusterSecretStore" to allow cluster-wide secret management.
    kind: ClusterSecretStore
    # -- The name of the SecretStore backend. For Vault, this typically refers to the Vault connection (e.g., "vault-backend").
    name: vault-backend
  target:
    # -- The creation policy for the target Kubernetes Secret.
    # "Owner" means ExternalSecret manages the lifecycle of the created secret, deleting it when ExternalSecret is deleted.
    creationPolicy: Owner
  # -- List of secrets to be synced from the external source (e.g., Vault).
  # Add secrets here, where each secretKey in Kubernetes will map to a corresponding key in the external store.
  secrets:
    - secretKey: DB_PASSWORD
      remoteRef:
        key: secrets/test/cluster-name/app-name/infra
        property: DB_PASSWORD
